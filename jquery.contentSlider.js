(function(a){a.fn.contentSlider=function(g){var i={image_base:null,slide_speed:500,auto_scroll:true,auto_scroll_timeout:6000,pause_on_hover:true,stop_on_click:true,slider_height:300,navigation_inline:false,autoscroll_direction:"right",debug:false};g=a.extend(i,g);var f=this;var d=f.find("div.sliders");var c=f.find("div.slider_overflow");var e=null;var b=null;var h=false;this.initSlider=function(){var k=f.find("div.slider");if(g.image_base==null){alert("No image base specified for ContentSlider widget.");return}f.addClass("content_slider_widget");var m=a("<div class='current_slide_indicator'></div>");var o=0;if(k.length>0){var l=0;k.each(function(q,p){if(q==0){a(p).attr("data-first-slide",true)}else{if(q==k.length-1){a(p).attr("data-last-slide",true)}}l=a(p).width();o+=l;if(g.navigation_inline==false){m.append(a("<img src='"+g.image_base+"/slider-inactive-slide.png' class='slide_indicator' width='10' height='10' />"))}})}var j=a("<img src='"+g.image_base+"/slider-left-arrow-static.png' class='slider_left' data-navigation-direction='left' width='20' height='20' />");var n=a("<img src='"+g.image_base+"/slider-right-arrow-static.png' class='slider_right enabled' data-navigation-direction='right' width='20' height='20' />");if(g.navigation_inline==false){m.prepend(j);m.append(n);f.append(m);a(f.find("img.slide_indicator").get(0)).attr("src",g.image_base+"/slider-active-slide.png")}else{j.addClass("inline");n.addClass("inline");d.before(j);d.after(n)}f.on("startAutoScroll",f.startAutoScroll);f.on("pauseAutoScroll",f.pauseAutoScroll);f.on("stopAutoScroll",f.stopAutoScroll);d.on("mouseenter",function(){f.trigger("pauseAutoScroll")});d.on("mouseleave",function(){f.trigger("startAutoScroll")});f.find("img.slide_indicator").on("click",f.slideIndicatorClickHandler);f.addLeftArrowHandlers();f.addRightArrowHandlers();e=a(k.get(0));f.find("img.slider_left").attr("src",g.image_base+"/slider-left-arrow-grey.png");c.css({width:o+"px"});d.css({width:e.width()+"px",height:g.slider_height+"px"});setTimeout(function(){f.trigger("startAutoScroll")},500)};this.slideIndicatorClickHandler=function(m){var n=a(m.target);if(!h){h=true;f.trigger("stopAutoScroll");var l=f.find("div.slider");var k=e.index()+1;var j=n.index();e=f.find("div.slider:nth-child("+j+")");var o=e.width()*(j-1);d.animate({scrollLeft:o,duration:g.slide_speed},{complete:function(){d.css({width:e.width()+"px"});if(g.navigation_inline==false){var p=n.siblings("img.slide_indicator");p.attr("src",g.image_base+"/slider-inactive-slide.png")}n.attr("src",g.image_base+"/slider-active-slide.png");f.showOrHideCorrectNavigationImages();h=false}})}};this.slideNavigationClickHandler=function(l,q){var t=a(l.target);if(!h&&(t.hasClass("enabled")||q!=null)){h=true;if(g.debug&&console!==undefined){console.log("scrolling!")}if(q==null){f.trigger("stopAutoScroll")}var m=f.find("div.slider");var p=e.index();var r=p+1;var s=null;var n=null;var j=0;var k=null;if(t.attr("data-navigation-direction")=="right"){n=r+1;if(r==m.length){k=m.clone(true,true);c.css({width:(c.width()*2)+"px"});c.append(k)}}else{if(t.attr("data-navigation-direction")=="left"){n=r-1;if(r==1){n+=m.length;k=m.clone(true,true);c.css({width:(c.width()*2)+"px"});c.prepend(k);d.scrollLeft(e.width()*(p+m.length))}}}s=n-1;var u=(n%m.length);var o=u-1;if(g.debug&&console!==undefined){console.log("\tnew zero-based index: "+s+"\n\tnew one-based index: "+n+"\n\tnew zero-based mod index: "+o+"\n\tnew one-based mod index: "+u)}e=f.find("div.slider:nth-child("+n+")");var v=e.width();j=e.width()*s;d.animate({scrollLeft:j,duration:g.slide_speed},{complete:function(){if(k!=null){m.remove();if(t.attr("data-navigation-direction")=="right"){var w=f.find("div.slider");c.css({width:(c.width()/2)+"px"});var y=0;a(this).scrollLeft(y)}}d.css({width:v+"px"});if(g.navigation_inline==false){f.find("div.current_slide_indicator img.slide_indicator").attr("src",g.image_base+"/slider-inactive-slide.png");var x=a(f.find("div.current_slide_indicator img.slide_indicator").get(o));x.attr("src",g.image_base+"/slider-active-slide.png")}f.showOrHideCorrectNavigationImages();h=false}})}};this.showOrHideCorrectNavigationImages=function(){var j=f.find("div.slider");if(e.attr("data-first-slide")!==undefined){f.find("img.slider_left").removeClass("enabled").attr("src",g.image_base+"/slider-left-arrow-grey.png");f.find("img.slider_right").addClass("enabled").attr("src",g.image_base+"/slider-right-arrow-static.png")}else{if(e.attr("data-last-slide")!==undefined){f.find("img.slider_left").addClass("enabled").attr("src",g.image_base+"/slider-left-arrow-static.png");f.find("img.slider_right").removeClass("enabled").attr("src",g.image_base+"/slider-right-arrow-grey.png")}else{f.find("img.slider_left").addClass("enabled").attr("src",g.image_base+"/slider-left-arrow-static.png");f.find("img.slider_right").addClass("enabled").attr("src",g.image_base+"/slider-right-arrow-static.png")}}};this.startAutoScroll=function(j){if(g.auto_scroll==true){if(g.autoscroll_direction=="right"){b=setInterval(function(){f.find("img.slider_right").trigger("click",[true])},g.auto_scroll_timeout)}else{if(g.autoscroll_direction=="left"){b=setInterval(function(){f.find("img.slider_left").trigger("click",[true])},g.auto_scroll_timeout)}}if(g.debug&&console!==undefined){console.log("starting slider auto scroll")}}};this.pauseAutoScroll=function(j){if(g.auto_scroll==true&&b!=null){b=clearInterval(b);if(g.debug&&console!==undefined){console.log("pausing slider auto scroll")}}};this.stopAutoScroll=function(j){if(g.auto_scroll==true&&b!=null){b=clearInterval(b);g.auto_scroll=false;if(g.debug&&console!==undefined){console.log("stopping slider auto scroll")}}};this.addLeftArrowHandlers=function(){f.find("img.slider_left").on("click",f.slideNavigationClickHandler);f.find("img.slider_left").on("mouseover",function(){if(a(this).hasClass("enabled")){a(this).attr("src",g.image_base+"/slider-left-arrow-rollover.png")}});f.find("img.slider_left").on("mouseout",function(){if(a(this).hasClass("enabled")){a(this).attr("src",g.image_base+"/slider-left-arrow-static.png")}})};this.addRightArrowHandlers=function(){f.find("img.slider_right").on("click",f.slideNavigationClickHandler);f.find("img.slider_right").on("mouseover",function(){if(a(this).hasClass("enabled")){a(this).attr("src",g.image_base+"/slider-right-arrow-rollover.png")}});f.find("img.slider_right").on("mouseout",function(){if(a(this).hasClass("enabled")){a(this).attr("src",g.image_base+"/slider-right-arrow-static.png")}})};this.initSlider();return this}})(jQuery);