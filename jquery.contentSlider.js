(function(a){a.fn.contentSlider=function(h){var d={image_base:null,slide_speed:500,auto_scroll:true,auto_scroll_timeout:6000,pause_on_hover:true,stop_on_click:true,slider_height:300,navigation_inline:false,autoscroll_direction:"right",debug:false};var j={};var i=this;var e=i.find("div.sliders");var b=i.find("div.slider_overflow");var c=null;var f=null;var g=false;this.initSlider=function(){if(j.image_base==null){throw"ContentSlider widget: no image base specified.";return}i.find("div.current_slide_indicator").remove();i.find("img[data-navigation-direction]").remove();c=i.find("div.slider:first-child");e.scrollLeft(0);var l=i.find("div.slider");i.addClass("content_slider_widget");var n=a("<div></div>").addClass("current_slide_indicator");var p=0;if(l.length>0){var m=0;l.each(function(r,q){if(r==0){a(q).attr("data-first-slide",true)}else{if(r==l.length-1){a(q).attr("data-last-slide",true)}}m=a(q).width();p+=m;if(j.navigation_inline==false){n.append(a("<img>").attr({src:j.image_base+"/slider-inactive-slide.png",width:10,height:10}).addClass("slide_indicator"))}})}var k=a("<img>").attr({src:j.image_base+"/slider-left-arrow-static.png","data-navigation-direction":"left"}).addClass("slider_left");var o=a("<img>").attr({src:j.image_base+"/slider-right-arrow-static.png","data-navigation-direction":"right"}).addClass("slider_right enabled");if(j.navigation_inline==false){n.prepend(k);n.append(o);i.append(n);i.find("img.slide_indicator").eq(0).attr("src",j.image_base+"/slider-active-slide.png")}else{k.addClass("inline");o.addClass("inline");e.before(k);e.after(o)}i.on("startAutoScroll",i.startAutoScroll);i.on("pauseAutoScroll",i.pauseAutoScroll);i.on("stopAutoScroll",i.stopAutoScroll);e.on("mouseenter",function(){i.trigger("pauseAutoScroll")});e.on("mouseleave",function(){i.trigger("startAutoScroll")});i.find("img.slide_indicator").on("click",i.slideIndicatorClickHandler);i.addLeftArrowHandlers();i.addRightArrowHandlers();c=l.eq(0);i.find("img.slider_left").attr("src",j.image_base+"/slider-left-arrow-grey.png");b.css({width:p+"px"});e.css({width:c.width()+"px",height:j.slider_height+"px"});i.data("content-slider-options",j);if(j.auto_scroll){setTimeout(function(){i.trigger("startAutoScroll")},500)}};this.slideIndicatorClickHandler=function(n){var o=a(n.target);if(!g){g=true;i.trigger("stopAutoScroll");var m=i.find("div.slider");var l=c.index()+1;var k=o.index();c=i.find("div.slider:nth-child("+k+")");var p=c.width()*(k-1);e.animate({scrollLeft:p,duration:j.slide_speed},{complete:function(){e.css({width:c.width()+"px"});if(j.navigation_inline==false){var q=o.siblings("img.slide_indicator");q.attr("src",j.image_base+"/slider-inactive-slide.png")}o.attr("src",j.image_base+"/slider-active-slide.png");i.showOrHideCorrectNavigationImages();g=false}})}};this.slideNavigationClickHandler=function(m,r){var u=a(m.target);if(!g&&(u.hasClass("enabled")||r!=null)){g=true;if(j.debug&&console!==undefined){console.log("scrolling!")}if(r==null){i.trigger("stopAutoScroll")}var n=i.find("div.slider");var q=c.index();var s=q+1;var t=null;var o=null;var k=0;var l=null;if(u.attr("data-navigation-direction")=="right"){o=s+1;if(s==n.length){l=n.clone(true,true);b.css({width:(b.width()*2)+"px"});b.append(l)}}else{if(u.attr("data-navigation-direction")=="left"){o=s-1;if(s==1){o+=n.length;l=n.clone(true,true);b.css({width:(b.width()*2)+"px"});b.prepend(l);e.scrollLeft(c.width()*(q+n.length))}}}t=o-1;var v=(o%n.length);var p=v-1;if(j.debug&&console!==undefined){console.log("\tnew zero-based index: "+t+"\n\tnew one-based index: "+o+"\n\tnew zero-based mod index: "+p+"\n\tnew one-based mod index: "+v)}c=i.find("div.slider:nth-child("+o+")");var w=c.width();k=c.width()*t;e.animate({scrollLeft:k,duration:j.slide_speed},{complete:function(){if(l!=null){n.remove();if(u.attr("data-navigation-direction")=="right"){var x=i.find("div.slider");b.css({width:(b.width()/2)+"px"});var z=0;a(this).scrollLeft(z)}}e.css({width:w+"px"});if(j.navigation_inline==false){i.find("div.current_slide_indicator img.slide_indicator").attr("src",j.image_base+"/slider-inactive-slide.png");var y=a(i.find("div.current_slide_indicator img.slide_indicator").get(p));y.attr("src",j.image_base+"/slider-active-slide.png")}i.showOrHideCorrectNavigationImages();g=false}})}};this.showOrHideCorrectNavigationImages=function(){var k=i.find("div.slider");if(c.attr("data-first-slide")!==undefined){i.find("img.slider_left").removeClass("enabled").attr("src",j.image_base+"/slider-left-arrow-grey.png");i.find("img.slider_right").addClass("enabled").attr("src",j.image_base+"/slider-right-arrow-static.png")}else{if(c.attr("data-last-slide")!==undefined){i.find("img.slider_left").addClass("enabled").attr("src",j.image_base+"/slider-left-arrow-static.png");i.find("img.slider_right").removeClass("enabled").attr("src",j.image_base+"/slider-right-arrow-grey.png")}else{i.find("img.slider_left").addClass("enabled").attr("src",j.image_base+"/slider-left-arrow-static.png");i.find("img.slider_right").addClass("enabled").attr("src",j.image_base+"/slider-right-arrow-static.png")}}};this.startAutoScroll=function(k){if(j.auto_scroll==true){if(j.autoscroll_direction=="right"){f=setInterval(function(){i.find("img.slider_right").trigger("click",[true])},j.auto_scroll_timeout)}else{if(j.autoscroll_direction=="left"){f=setInterval(function(){i.find("img.slider_left").trigger("click",[true])},j.auto_scroll_timeout)}}if(j.debug&&console!==undefined){console.log("starting slider auto scroll")}}};this.pauseAutoScroll=function(k){if(j.auto_scroll==true&&f!=null){f=clearInterval(f);if(j.debug&&console!==undefined){console.log("pausing slider auto scroll")}}};this.stopAutoScroll=function(k){if(j.auto_scroll==true&&f!=null){f=clearInterval(f);j.auto_scroll=false;if(j.debug&&console!==undefined){console.log("stopping slider auto scroll")}}};this.addLeftArrowHandlers=function(){i.find("img.slider_left").on("click",i.slideNavigationClickHandler);i.find("img.slider_left").on("mouseover",function(){if(a(this).hasClass("enabled")){a(this).attr("src",j.image_base+"/slider-left-arrow-rollover.png")}});i.find("img.slider_left").on("mouseout",function(){if(a(this).hasClass("enabled")){a(this).attr("src",j.image_base+"/slider-left-arrow-static.png")}})};this.addRightArrowHandlers=function(){i.find("img.slider_right").on("click",i.slideNavigationClickHandler);i.find("img.slider_right").on("mouseover",function(){if(a(this).hasClass("enabled")){a(this).attr("src",j.image_base+"/slider-right-arrow-rollover.png")}});i.find("img.slider_right").on("mouseout",function(){if(a(this).hasClass("enabled")){a(this).attr("src",j.image_base+"/slider-right-arrow-static.png")}})};if(typeof h=="string"){j=i.data("content-slider-options");if(h=="reinit"){this.initSlider()}}else{j=a.extend(d,h);this.initSlider()}return this}})(jQuery);